FROM canpacis/pacis:latest

# Set working directory
WORKDIR /app

# Copy the source code
COPY . .

# Install dependencies and build
RUN /usr/local/bin/pcpg i
RUN /usr/local/bin/pcpg c www
RUN go build -o pacis-www ./www

ENV PATH="/usr/local/bin:${PATH}"

EXPOSE 8080

CMD ["./pacis-www"]